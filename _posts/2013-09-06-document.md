---
layout: post
title: "功能文档"
description: "document"
category: "rails"
tags: ["rails-man"]
---
{% include JB/setup %}

# 主要功能
1. 购物车
2. 喜欢功能
3. 分类导航
4. 邮件推送
5. 数据分析
6. 用户验证
7. 管理员后台

## 功能细节
**一. 购物车**

> (1). 没有登录用户可以使用购物车, 将分配一个临时的session个访客使用
 这个session将不存进数据库，当用户退出的时候，用户所添加的产品也随即销毁

> (2). 新注册的用户，当用户注册之后，就分配一个新的购物车的ID给这个当前用户
 这个用户先前添加进购物车的内容也分配到当前用户的当前购物车ID中。之前的
 session也就销毁

> (3). 登陆的用户， 用户登陆就查找当前用户的ID和购物车的ID的相匹配，用户只能有
 一个购物车，用户与购物车的关系是一对一的关系。页面的共用的导航栏可以看到之前
 添加进购物车而没有结算的内容。并显示购物车中的总数。当用户结算，就把购物车中的
 产品全部清空。等待下一次的添加

**二. 喜欢功能**

> (1). 每个产品可以添加喜欢和不喜欢，需要用户登录就可以进行点击喜欢和不喜欢
 当用户点击喜欢的就喜欢的数加一个。这个喜欢跟收藏是一个样的，用户点击喜欢
 就在用户经过的页面，显示的用户喜欢过的产品，限制显示喜欢的数目是4个。
 这样减少数据库的查询压力。

> (2).用户没有登录就显示其他用户喜欢的数目。但是访问不能点击喜欢或是不喜欢，
 访问所经过的页面只显示其他用户喜欢最多的产品的条目。和浏览最做多的产品条目。

> (3). 访问计数。到用户访问到某一个具体的产品，就在记录一次用户访问数。目前是
 刷新一次就记录一次，也可以记录一个IP一天只记录一次。访问最多的页面也会在各个
 页面显示。

**三.分类导航**

> (1).三级分类。`Category`, `Tag`, `List`。
 每个大类下面有多个标签，每个标签下面有过个标签列表。每个标签列表有多个产品。
 导航栏做成侧边导航栏。显示大分类，用户鼠标移动到大分类上面，就显示这个大分类下面
 所有的标签和标签列表。

> (2). 当用户没有选择大类下面的分类。就直接点击大类。就链接到这个大类的所包含的所有产品

**四.邮件推送**

> (1). 用户注册之后，会发送一份一封确认的邮件给用户注册的邮箱，当用户到自己的邮箱确认完之后
	在能登陆。

> (2). 用户点击购物车的产品进行结算的时候，到结算信息的填写完成之后，发送一份感谢邮件。

> (3). 用户所订购的产品已经发货在运输途中，发送一份运输在途的邮件。

> (4). 当有发布新产品的时候的，就给所有的用户发送一份邮件。

> (5). 发布新产品的时候，关联微博，当产品提交的时候，就把当前的发布的产品，关联到微博之中。

**五. 数据分析**

> 这个现在没有具体显现。思路是这样的， 当用户到本站之后，就跟踪用户的访问记录和搜索记录，
 在将这些数据倒入到数据库中，这个数据库现在想到用`Redis`，`Mongodb`也是可选的。将这些数据
 进行整理。根据用户具体的产品页面停留的时间的。判断用户的对这个的兴趣。然后早出这个产品所属
 的ID。进而找到这个产品属于哪一个大类。根据大类的查找相似的类中的产品展示给用户。
 而记录到数据库中的数据，有访问者的ID，和产品ID，用户的的停留的时间，根据这些内容查找用户访问
 停留时间最长的前8个产品。如果用户有订购这个其中的这个产品，就把这个产品记录到用户的已订购的
 数据库中。如果没有，就把就这些产品作为推荐产品，推荐个用户。显示的数目为8个，当不足8个，就查找
 这些产品所属的大类产品中，这个用户访问过停留时间相对长的产品。

**六. 用户验证**

> 邮箱验证

**七. 管理员后台管理**

> 管理员编辑产品，修改产品。查看用户登陆信息

### 所要涉及的模型Gem

> 模型

```
Category, 大类
Tag,标签 
List, 标签列表  
Product, 产品中心 
Cart, 购物车 
CartItem, 购物车与产品关联 
Order, 订单 
User, 用户
Admin, 管理员  
Likeable, 喜欢
Session, 会话Id存放
```

```ruby
gem 'rails_admin'
gem 'simple-navigation'
gem 'devise'
gem 'likable'
gem 'redis'
gem 'will_paginate'
gem 'bootsttrap-sass'
gem 'mysql'
```
